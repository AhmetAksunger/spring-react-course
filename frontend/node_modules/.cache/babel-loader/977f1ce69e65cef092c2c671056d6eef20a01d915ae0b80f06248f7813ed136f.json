{"ast":null,"code":"import { legacy_createStore as createStore } from 'redux';\nimport authReducer from './authReducer';\nimport SecureLS from 'secure-ls';\nimport { setAuthorizationHeader } from '../api/apiCalls';\nconst secureLS = new SecureLS();\nconst getStateFromStorage = () => {\n  const localAuthData = secureLS.get(\"auth\");\n  let stateInLocalStorage = {\n    isLoggedIn: false,\n    username: undefined,\n    displayName: undefined,\n    image: undefined,\n    password: undefined\n  };\n  if (localAuthData) {\n    return localAuthData;\n  }\n};\nconst updateStateInStorage = newState => {\n  secureLS.set(\"auth\", newState);\n};\nconst configureStore = () => {\n  const stateInLocalStorage = getStateFromStorage();\n  const store = createStore(authReducer, stateInLocalStorage, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\n  // each time the state changes, this method will run\n  store.subscribe(() => {\n    updateStateInStorage(store.getState());\n    setAuthorizationHeader(store.getState());\n  });\n  return store;\n};\nexport default configureStore;","map":{"version":3,"names":["legacy_createStore","createStore","authReducer","SecureLS","setAuthorizationHeader","secureLS","getStateFromStorage","localAuthData","get","stateInLocalStorage","isLoggedIn","username","undefined","displayName","image","password","updateStateInStorage","newState","set","configureStore","store","window","__REDUX_DEVTOOLS_EXTENSION__","subscribe","getState"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/redux/configureStore.js"],"sourcesContent":["import { legacy_createStore as createStore } from 'redux';\r\nimport authReducer from './authReducer';\r\nimport SecureLS from 'secure-ls';\r\nimport { setAuthorizationHeader } from '../api/apiCalls';\r\n\r\nconst secureLS = new SecureLS();\r\n\r\nconst getStateFromStorage = () => {\r\n\r\n  const localAuthData = secureLS.get(\"auth\");\r\n\r\n  let stateInLocalStorage = {\r\n    isLoggedIn: false,\r\n    username: undefined,\r\n    displayName: undefined,\r\n    image: undefined,\r\n    password: undefined\r\n  }\r\n\r\n  if(localAuthData){\r\n    return localAuthData;\r\n  }\r\n}\r\n\r\nconst updateStateInStorage = (newState) => {\r\n\r\n  secureLS.set(\"auth\",newState);\r\n\r\n}\r\n  \r\nconst configureStore = () => {\r\n\r\n  const stateInLocalStorage = getStateFromStorage();\r\n\r\n  const store = createStore(authReducer, stateInLocalStorage,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());  \r\n\r\n  // each time the state changes, this method will run\r\n  store.subscribe(() => {\r\n    updateStateInStorage(store.getState());\r\n    setAuthorizationHeader(store.getState());\r\n  })\r\n\r\n  return store; \r\n}\r\n\r\nexport default configureStore;"],"mappings":"AAAA,SAASA,kBAAkB,IAAIC,WAAW,QAAQ,OAAO;AACzD,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAASC,sBAAsB,QAAQ,iBAAiB;AAExD,MAAMC,QAAQ,GAAG,IAAIF,QAAQ,CAAC,CAAC;AAE/B,MAAMG,mBAAmB,GAAGA,CAAA,KAAM;EAEhC,MAAMC,aAAa,GAAGF,QAAQ,CAACG,GAAG,CAAC,MAAM,CAAC;EAE1C,IAAIC,mBAAmB,GAAG;IACxBC,UAAU,EAAE,KAAK;IACjBC,QAAQ,EAAEC,SAAS;IACnBC,WAAW,EAAED,SAAS;IACtBE,KAAK,EAAEF,SAAS;IAChBG,QAAQ,EAAEH;EACZ,CAAC;EAED,IAAGL,aAAa,EAAC;IACf,OAAOA,aAAa;EACtB;AACF,CAAC;AAED,MAAMS,oBAAoB,GAAIC,QAAQ,IAAK;EAEzCZ,QAAQ,CAACa,GAAG,CAAC,MAAM,EAACD,QAAQ,CAAC;AAE/B,CAAC;AAED,MAAME,cAAc,GAAGA,CAAA,KAAM;EAE3B,MAAMV,mBAAmB,GAAGH,mBAAmB,CAAC,CAAC;EAEjD,MAAMc,KAAK,GAAGnB,WAAW,CAACC,WAAW,EAAEO,mBAAmB,EAACY,MAAM,CAACC,4BAA4B,IAAID,MAAM,CAACC,4BAA4B,CAAC,CAAC,CAAC;;EAExI;EACAF,KAAK,CAACG,SAAS,CAAC,MAAM;IACpBP,oBAAoB,CAACI,KAAK,CAACI,QAAQ,CAAC,CAAC,CAAC;IACtCpB,sBAAsB,CAACgB,KAAK,CAACI,QAAQ,CAAC,CAAC,CAAC;EAC1C,CAAC,CAAC;EAEF,OAAOJ,KAAK;AACd,CAAC;AAED,eAAeD,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}