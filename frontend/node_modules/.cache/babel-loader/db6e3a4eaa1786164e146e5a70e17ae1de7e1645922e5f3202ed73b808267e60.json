{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\90538\\\\Desktop\\\\spring-react-course\\\\frontend\\\\src\\\\pages\\\\UserSignupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { signup, changeLanguage, login } from \"../api/apiCalls\";\nimport Input from \"../components/input\";\nimport { withTranslation } from \"react-i18next\";\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\nimport LanguageSelector from \"../components/LanguageSelector\";\nimport { withApiProgress } from \"../shared/ApiProgress\";\nimport { connect } from \"react-redux\";\nimport { loginSuccess } from \"../redux/authActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserSignupPage = props => {\n  _s();\n  //each class component must override render\n\n  const [username, setUsername] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [password, setPassword] = useState();\n  const [confirmPassword, setConfirmPassword] = useState();\n  const [errors, setErrors] = useState({});\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    //const name = event.target.name;\n    //const value = event.target.value;\n    const errors = {\n      ...errors\n    }; // copy errors\n    errors[name] = undefined;\n    if (name == \"password\" || name == \"confirmPassword\") {\n      if (name == \"password\" && value != confirmPassword) {\n        errors.confirmPassword = props.t(\"Passwords do not match\");\n      } else if (name == \"confirmPassword\" && value != this.state.password) {\n        errors.confirmPassword = props.t(\"Passwords do not match\");\n      } else {\n        errors.confirmPassword = undefined;\n      }\n    }\n    setErrors(errors);\n  };\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      username,\n      displayName,\n      password\n    } = props;\n    const body = {\n      \"username\": username,\n      \"displayName\": displayName,\n      \"password\": password\n    };\n    try {\n      const response = await signup(body);\n      console.log(\"signed up successfully\");\n      const creds = {\n        username: body.username,\n        password: body.password\n      };\n      const loginResponse = await login(creds);\n      const authState = {\n        username: loginResponse.data.username,\n        displayName: loginResponse.data.displayName,\n        image: loginResponse.data.image,\n        password: body.password\n      };\n      props.dispatch(loginSuccess(authState));\n      props.history.push(\"/\");\n    } catch (error) {\n      if (error.response.data.validationErrors != null) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n  const {\n    t,\n    pendingApiCall\n  } = this.props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: t(\"Sign up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"username\",\n        label: t(\"Username\"),\n        error: errors.username,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"displayName\",\n        label: t(\"Display Name\"),\n        error: errors.displayName,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"password\",\n        label: t(\"Password\"),\n        error: errors.password,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"confirmPassword\",\n        label: t(\"Confirm Password\"),\n        error: errors.confirmPassword,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n        buttonText: t(\"Sign up\"),\n        pendingApiCall: pendingApiCall,\n        onClickMethod: onClickSignup,\n        disabledStatement: pendingApiCall || errors.confirmPassword != undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n_s(UserSignupPage, \"VHlu18AQqgNXz41YBgNNbjj28LE=\");\n_c = UserSignupPage;\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage);\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation, \"/api/1.0/users\");\n_c2 = UserSignupPageWithApiProgress;\nexport default connect()(UserSignupPageWithApiProgress);\nvar _c, _c2;\n$RefreshReg$(_c, \"UserSignupPage\");\n$RefreshReg$(_c2, \"UserSignupPageWithApiProgress\");","map":{"version":3,"names":["React","useState","signup","changeLanguage","login","Input","withTranslation","ButtonWithProgress","LanguageSelector","withApiProgress","connect","loginSuccess","jsxDEV","_jsxDEV","UserSignupPage","props","_s","username","setUsername","displayName","setDisplayName","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","onChange","event","name","value","target","undefined","t","state","onClickSignup","preventDefault","body","response","console","log","creds","loginResponse","authState","data","image","dispatch","history","push","error","validationErrors","pendingApiCall","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","buttonText","onClickMethod","disabledStatement","_c","UserSignupPageWithTranslation","UserSignupPageWithApiProgress","_c2","$RefreshReg$"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/pages/UserSignupPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {signup, changeLanguage, login} from \"../api/apiCalls\"\r\nimport Input from \"../components/input\"\r\nimport { withTranslation } from \"react-i18next\"\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport LanguageSelector from \"../components/LanguageSelector\";\r\nimport { withApiProgress } from \"../shared/ApiProgress\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginSuccess } from \"../redux/authActions\";\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    //each class component must override render\r\n    \r\n    const [username, setUsername] = useState();\r\n    const [displayName, setDisplayName] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [confirmPassword, setConfirmPassword] = useState();\r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = (event) =>{\r\n\r\n        const {name, value} = event.target\r\n        //const name = event.target.name;\r\n        //const value = event.target.value;\r\n        const errors = {...errors}; // copy errors\r\n        errors[name] = undefined;\r\n\r\n        if(name == \"password\" || name == \"confirmPassword\"){\r\n            if(name == \"password\" && value != confirmPassword){\r\n                errors.confirmPassword = props.t(\"Passwords do not match\")\r\n            }\r\n            else if(name == \"confirmPassword\" && value != this.state.password){\r\n                errors.confirmPassword = props.t(\"Passwords do not match\")\r\n            }else{\r\n                errors.confirmPassword = undefined;\r\n            }\r\n        }\r\n            setErrors(errors);\r\n    };\r\n\r\n    const onClickSignup = async event =>{\r\n        event.preventDefault()\r\n        \r\n        const {username,displayName,password} = props\r\n\r\n        const body = {\r\n            \"username\": username,\r\n            \"displayName\": displayName,\r\n            \"password\": password\r\n        }\r\n\r\n        try {\r\n            const response = await signup(body)\r\n            console.log(\"signed up successfully\");\r\n\r\n            const creds = {\r\n                username: body.username,\r\n                password: body.password\r\n            }\r\n\r\n            const loginResponse = await login(creds);\r\n\r\n            const authState = {\r\n                username: loginResponse.data.username,\r\n                displayName: loginResponse.data.displayName,\r\n                image: loginResponse.data.image,\r\n                password: body.password\r\n            }\r\n\r\n            props.dispatch(loginSuccess(authState))\r\n\r\n            props.history.push(\"/\")\r\n            \r\n        } catch (error) {\r\n            \r\n            if(error.response.data.validationErrors != null){\r\n                setErrors(error.response.data.validationErrors)\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n\r\n    };\r\n\r\n    const {t,pendingApiCall} = this.props;\r\n    return(\r\n        <div className=\"container\">\r\n            <form> \r\n                <h1 className=\"text-center\">{t(\"Sign up\")}</h1>\r\n                <Input type=\"text\" name=\"username\" label={t(\"Username\")} error ={errors.username} onChange={onChange} />\r\n                <Input type=\"text\" name=\"displayName\" label={t(\"Display Name\")} error ={errors.displayName} onChange={onChange} />\r\n                <Input type=\"password\" name=\"password\" label={t(\"Password\")} error ={errors.password} onChange={onChange} />\r\n                <Input type=\"password\" name=\"confirmPassword\" label={t(\"Confirm Password\")} error ={errors.confirmPassword} onChange={onChange} />\r\n                \r\n                {/*\r\n                <div className=\"form-group\">\r\n                    <label>Username</label>\r\n                    <input type=\"text\" className={errors.username == null ? \"form-control\" : \"form-control is-invalid\"} name=\"username\" onChange={this.onChange}/>\r\n                    <div className=\"invalid-feedback\">\r\n                        {errors.username}\r\n                    </div>\r\n                </div>\r\n                */}\r\n                <ButtonWithProgress buttonText={t(\"Sign up\")} pendingApiCall={pendingApiCall} onClickMethod={onClickSignup} disabledStatement={pendingApiCall || errors.confirmPassword != undefined}/>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage)\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation,\"/api/1.0/users\")\r\n\r\nexport default connect()(UserSignupPageWithApiProgress);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}