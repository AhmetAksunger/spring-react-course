{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\90538\\\\Desktop\\\\spring-react-course\\\\frontend\\\\src\\\\pages\\\\UserSignupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { signup, changeLanguage, login } from \"../api/apiCalls\";\nimport Input from \"../components/input\";\nimport { useTranslation } from \"react-i18next\";\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\nimport { withApiProgress } from \"../shared/ApiProgress\";\nimport { useDispatch } from \"react-redux\";\nimport { loginSuccess } from \"../redux/authActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserSignupPage = props => {\n  _s();\n  //each class component must override render\n\n  const dispatch = useDispatch();\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    confirmPassword: null\n  });\n  const [errors, setErrors] = useState({});\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    //const name = event.target.name;\n    //const value = event.target.value;\n    const errorsCopy = {\n      ...errors\n    }; // copy errors\n    errorsCopy[name] = undefined;\n    if (name == \"password\" || name == \"confirmPassword\") {\n      if (name == \"password\" && value !== form.confirmPassword) {\n        errorsCopy.confirmPassword = t(\"Passwords do not match\");\n      } else if (name == \"confirmPassword\" && value !== form.password) {\n        errorsCopy.confirmPassword = t(\"Passwords do not match\");\n      } else {\n        errorsCopy.confirmPassword = undefined;\n      }\n    }\n    setErrors(errorsCopy);\n    const formCopy = {\n      ...form\n    };\n    formCopy[name] = value;\n    setForm(formCopy);\n  };\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const body = {\n      \"username\": form.username,\n      \"displayName\": form.displayName,\n      \"password\": form.password\n    };\n    try {\n      const response = await signup(body);\n      const creds = {\n        username: body.username,\n        password: body.password\n      };\n      const loginResponse = await login(creds);\n      const authState = {\n        username: loginResponse.data.username,\n        displayName: loginResponse.data.displayName,\n        image: loginResponse.data.image,\n        password: body.password\n      };\n      dispatch(loginSuccess(authState));\n      props.history.push(\"/\");\n    } catch (error) {\n      console.log(error);\n      if (error.response.data.validationErrors != null) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n  const {\n    t\n  } = useTranslation();\n  const {\n    pendingApiCall\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: t(\"Sign up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"username\",\n        label: t(\"Username\"),\n        error: errors.username,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"displayName\",\n        label: t(\"Display Name\"),\n        error: errors.displayName,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"password\",\n        label: t(\"Password\"),\n        error: errors.password,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"confirmPassword\",\n        label: t(\"Confirm Password\"),\n        error: errors.confirmPassword,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n        buttonText: t(\"Sign up\"),\n        pendingApiCall: pendingApiCall,\n        onClickMethod: onClickSignup,\n        disabledStatement: pendingApiCall || errors.confirmPassword !== undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n_s(UserSignupPage, \"c+m1yenWYjaQj3HjBUAnE04Lw34=\", false, function () {\n  return [useDispatch, useTranslation];\n});\n_c = UserSignupPage;\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage, \"/api/1.0/users\");\n_c2 = UserSignupPageWithApiProgress;\nexport default UserSignupPageWithApiProgress;\nvar _c, _c2;\n$RefreshReg$(_c, \"UserSignupPage\");\n$RefreshReg$(_c2, \"UserSignupPageWithApiProgress\");","map":{"version":3,"names":["React","useState","signup","changeLanguage","login","Input","useTranslation","ButtonWithProgress","withApiProgress","useDispatch","loginSuccess","jsxDEV","_jsxDEV","UserSignupPage","props","_s","dispatch","form","setForm","username","displayName","password","confirmPassword","errors","setErrors","onChange","event","name","value","target","errorsCopy","undefined","t","formCopy","onClickSignup","preventDefault","body","response","creds","loginResponse","authState","data","image","history","push","error","console","log","validationErrors","pendingApiCall","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","buttonText","onClickMethod","disabledStatement","_c","UserSignupPageWithApiProgress","_c2","$RefreshReg$"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/pages/UserSignupPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {signup, changeLanguage, login} from \"../api/apiCalls\"\r\nimport Input from \"../components/input\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport { withApiProgress } from \"../shared/ApiProgress\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginSuccess } from \"../redux/authActions\";\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    //each class component must override render\r\n    \r\n    const dispatch = useDispatch();\r\n\r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        confirmPassword: null\r\n    });\r\n    \r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = (event) =>{\r\n\r\n        const {name, value} = event.target\r\n        //const name = event.target.name;\r\n        //const value = event.target.value;\r\n        const errorsCopy = {...errors}; // copy errors\r\n        errorsCopy[name] = undefined;\r\n\r\n        if(name == \"password\" || name == \"confirmPassword\"){\r\n            if(name == \"password\" && value !== form.confirmPassword){\r\n                errorsCopy.confirmPassword = t(\"Passwords do not match\")\r\n            }\r\n            else if(name == \"confirmPassword\" && value !== form.password){\r\n                errorsCopy.confirmPassword = t(\"Passwords do not match\")\r\n            }else{\r\n                errorsCopy.confirmPassword = undefined;\r\n            }\r\n        }\r\n        setErrors(errorsCopy);\r\n        \r\n        const formCopy = {...form};\r\n        formCopy[name] = value;\r\n\r\n        setForm(formCopy);\r\n    };\r\n\r\n\r\n    const onClickSignup = async event =>{\r\n        event.preventDefault()\r\n        \r\n        const body = {\r\n            \"username\": form.username,\r\n            \"displayName\": form.displayName,\r\n            \"password\": form.password\r\n        }\r\n\r\n        try {\r\n            const response = await signup(body)\r\n\r\n            const creds = {\r\n                username: body.username,\r\n                password: body.password\r\n            }\r\n\r\n            const loginResponse = await login(creds);\r\n\r\n            const authState = {\r\n                username: loginResponse.data.username,\r\n                displayName: loginResponse.data.displayName,\r\n                image: loginResponse.data.image,\r\n                password: body.password\r\n            }\r\n\r\n            dispatch(loginSuccess(authState))\r\n\r\n            props.history.push(\"/\")\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n            if(error.response.data.validationErrors != null){\r\n                setErrors(error.response.data.validationErrors)\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n\r\n    };\r\n\r\n    const {t} = useTranslation();\r\n    const {pendingApiCall} = props;\r\n    return(\r\n        <div className=\"container\">\r\n            <form> \r\n                <h1 className=\"text-center\">{t(\"Sign up\")}</h1>\r\n                <Input type=\"text\" name=\"username\" label={t(\"Username\")} error ={errors.username} onChange={onChange} />\r\n                <Input type=\"text\" name=\"displayName\" label={t(\"Display Name\")} error ={errors.displayName} onChange={onChange} />\r\n                <Input type=\"password\" name=\"password\" label={t(\"Password\")} error ={errors.password} onChange={onChange} />\r\n                <Input type=\"password\" name=\"confirmPassword\" label={t(\"Confirm Password\")} error ={errors.confirmPassword} onChange={onChange} />\r\n                \r\n                {/*\r\n                <div className=\"form-group\">\r\n                    <label>Username</label>\r\n                    <input type=\"text\" className={errors.username == null ? \"form-control\" : \"form-control is-invalid\"} name=\"username\" onChange={this.onChange}/>\r\n                    <div className=\"invalid-feedback\">\r\n                        {errors.username}\r\n                    </div>\r\n                </div>\r\n                */}\r\n                <ButtonWithProgress buttonText={t(\"Sign up\")} pendingApiCall={pendingApiCall} onClickMethod={onClickSignup} disabledStatement={pendingApiCall || errors.confirmPassword !== undefined}/>\r\n                \r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage,\"/api/1.0/users\")\r\n\r\nexport default UserSignupPageWithApiProgress;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}