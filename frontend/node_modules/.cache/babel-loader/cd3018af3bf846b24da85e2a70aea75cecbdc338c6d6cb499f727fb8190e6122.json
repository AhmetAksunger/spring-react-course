{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import ProfileImageWithDefault from'./ProfileImageWithDefault';import{Link}from'react-router-dom/cjs/react-router-dom.min';import{format}from'timeago.js';import{useTranslation}from'react-i18next';import{useSelector}from'react-redux';import{deleteHoax}from'../api/apiCalls';import Modal from'./Modal';import{useApiProgress}from'../shared/ApiProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HoaxListItem=function HoaxListItem(props){var loggedInUsername=useSelector(function(store){return store.username;});var content=props.content,timeStamp=props.timeStamp,user=props.user,fileAttachment=props.fileAttachment,hoaxId=props.hoaxId,onDeleteSuccess=props.onDeleteSuccess;var username=user.username,displayName=user.displayName,image=user.image;var _useTranslation=useTranslation(),i18n=_useTranslation.i18n,t=_useTranslation.t;var pendingApiCall=useApiProgress(\"delete\",\"/api/1.0/hoaxes/\".concat(hoaxId),true);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var formattedTime=format(timeStamp,i18n.language);var ownedByLoggedInUser=loggedInUsername===username;var onClickDelete=function onClickDelete(){setVisible(true);};var onClickCancelModal=function onClickCancelModal(){setVisible(false);};var onClickDeleteModal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return deleteHoax(hoaxId);case 2:onDeleteSuccess();setVisible(false);case 4:case\"end\":return _context.stop();}},_callee);}));return function onClickDeleteModal(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-auto\",children:[/*#__PURE__*/_jsx(ProfileImageWithDefault,{image:image,width:\"32\",height:\"32\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2 fw-bold\",children:/*#__PURE__*/_jsxs(Link,{className:\"text-dark text-decoration-none\",to:\"/user/\".concat(username),children:[displayName,\"@\",username]})}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2 fw-light\",children:formattedTime}),ownedByLoggedInUser&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-delete-link mt-1 ms-2\",onClick:onClickDelete,children:/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined\",children:\"delete\"})})]})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{class:\"form-control mt-2 mb-2\",value:content})}),fileAttachment&&/*#__PURE__*/_jsx(\"img\",{className:\"img-thumbnail\",src:\"/images/\"+fileAttachment.name})]})]}),/*#__PURE__*/_jsx(Modal,{title:t(\"Delete hoax\"),visible:visible,onClickCancel:onClickCancelModal,onClickDelete:onClickDeleteModal,pendingApiCall:pendingApiCall,message:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"Are you sure to delete the hoax?\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"span\",{children:content})})]})})]});};export default HoaxListItem;","map":{"version":3,"names":["React","useState","ProfileImageWithDefault","Link","format","useTranslation","useSelector","deleteHoax","Modal","useApiProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HoaxListItem","props","loggedInUsername","store","username","content","timeStamp","user","fileAttachment","hoaxId","onDeleteSuccess","displayName","image","_useTranslation","i18n","t","pendingApiCall","concat","_useState","_useState2","_slicedToArray","visible","setVisible","formattedTime","language","ownedByLoggedInUser","onClickDelete","onClickCancelModal","onClickDeleteModal","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","apply","arguments","children","className","width","height","to","onClick","class","value","src","name","title","onClickCancel","message"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/components/HoaxListItem.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport ProfileImageWithDefault from './ProfileImageWithDefault';\r\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { format } from 'timeago.js';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport { deleteHoax } from '../api/apiCalls';\r\nimport Modal from './Modal';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\n\r\nconst HoaxListItem = (props) => {\r\n    \r\n    const loggedInUsername = useSelector((store) => {\r\n        return store.username;\r\n    })\r\n    const {content, timeStamp, user, fileAttachment,hoaxId, onDeleteSuccess} = props;\r\n    const {username,displayName,image} = user;\r\n    const {i18n, t} = useTranslation();\r\n\r\n    const pendingApiCall = useApiProgress(\"delete\",`/api/1.0/hoaxes/${hoaxId}`,true);\r\n\r\n    const [visible,setVisible] = useState(false);\r\n\r\n    const formattedTime = format(timeStamp,i18n.language);\r\n\r\n    const ownedByLoggedInUser = loggedInUsername === username;\r\n\r\n    const onClickDelete = () => {\r\n        setVisible(true);\r\n    }\r\n\r\n    const onClickCancelModal = () => {\r\n        setVisible(false);\r\n    }\r\n\r\n    const onClickDeleteModal = async () => {\r\n        await deleteHoax(hoaxId);\r\n        onDeleteSuccess();\r\n        setVisible(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className='card mt-3'>\r\n            <div className='row'>\r\n                <div className='col-auto'>\r\n                    <ProfileImageWithDefault image={image} width=\"32\" height=\"32\" />\r\n                    <span className='ms-2 fw-bold'>\r\n                        <Link className=\"text-dark text-decoration-none\" to={`/user/${username}`}>{displayName}@{username}</Link>\r\n                    </span>\r\n                    <span className='ms-2 fw-light'>\r\n                        {formattedTime}\r\n                    </span>\r\n                    {ownedByLoggedInUser &&\r\n                    <button className='btn btn-delete-link mt-1 ms-2' onClick={onClickDelete}>\r\n                        <span class=\"material-symbols-outlined\">delete</span>\r\n                    </button> \r\n                    }\r\n                </div>\r\n            </div>\r\n            <form>\r\n                <div class=\"form-group\">\r\n                    <textarea class=\"form-control mt-2 mb-2\" value={content}/>\r\n                </div>\r\n                {fileAttachment && <img className='img-thumbnail' src={\"/images/\" + fileAttachment.name}/> }\r\n            </form>\r\n        </div>\r\n        <Modal title={t(\"Delete hoax\")} visible={visible} onClickCancel={onClickCancelModal} onClickDelete={onClickDeleteModal} pendingApiCall={pendingApiCall} message={\r\n            <div>\r\n                <div className='row'>\r\n                    <strong>{t(\"Are you sure to delete the hoax?\")}</strong>\r\n                </div>\r\n                <div className='row'>\r\n                    <span>{content}</span>\r\n                </div>\r\n            </div>\r\n        }/>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default HoaxListItem;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}