{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\90538\\\\Desktop\\\\spring-react-course\\\\frontend\\\\src\\\\pages\\\\UserSignupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { signup, changeLanguage, login } from \"../api/apiCalls\";\nimport Input from \"../components/input\";\nimport { withTranslation } from \"react-i18next\";\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\nimport LanguageSelector from \"../components/LanguageSelector\";\nimport { withApiProgress } from \"../shared/ApiProgress\";\nimport { connect } from \"react-redux\";\nimport { loginSuccess } from \"../redux/authActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserSignupPage = props => {\n  _s();\n  //each class component must override render\n\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    confirmPassword: null\n  });\n  const [errors, setErrors] = useState({});\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    //const name = event.target.name;\n    //const value = event.target.value;\n    const errorsCopy = {\n      ...errors\n    }; // copy errors\n    errorsCopy[name] = undefined;\n    if (name == \"password\" || name == \"confirmPassword\") {\n      if (name == \"password\" && value !== form.confirmPassword) {\n        errorsCopy.confirmPassword = props.t(\"Passwords do not match\");\n        console.log(errorsCopy);\n      } else if (name == \"confirmPassword\" && value !== form.password) {\n        errorsCopy.confirmPassword = props.t(\"Passwords do not match\");\n        console.log(errorsCopy);\n      } else {\n        console.log(\"test\");\n        errorsCopy.confirmPassword = undefined;\n      }\n    }\n    setErrors(errorsCopy);\n    if (name === \"username\") {\n      setUsername(value);\n    } else if (name === \"displayName\") {\n      setDisplayName(value);\n    } else if (name === \"password\") {\n      setPassword(value);\n    } else if (name === \"confirmPassword\") {\n      setConfirmPassword(value);\n    }\n  };\n  console.log(errors);\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const body = {\n      \"username\": form.username,\n      \"displayName\": form.displayName,\n      \"password\": form.password\n    };\n    try {\n      const response = await signup(body);\n      console.log(\"signed up successfully\");\n      const creds = {\n        username: body.username,\n        password: body.password\n      };\n      const loginResponse = await login(creds);\n      const authState = {\n        username: loginResponse.data.username,\n        displayName: loginResponse.data.displayName,\n        image: loginResponse.data.image,\n        password: body.password\n      };\n      props.dispatch(loginSuccess(authState));\n      props.history.push(\"/\");\n    } catch (error) {\n      if (error.response.data.validationErrors != null) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n  const {\n    t,\n    pendingApiCall\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: t(\"Sign up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"username\",\n        label: t(\"Username\"),\n        error: errors.username,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"displayName\",\n        label: t(\"Display Name\"),\n        error: errors.displayName,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"password\",\n        label: t(\"Password\"),\n        error: errors.password,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"confirmPassword\",\n        label: t(\"Confirm Password\"),\n        error: errors.confirmPassword,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n        buttonText: t(\"Sign up\"),\n        pendingApiCall: pendingApiCall,\n        onClickMethod: onClickSignup,\n        disabledStatement: pendingApiCall || errors.confirmPassword !== undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n_s(UserSignupPage, \"fBt5nl+FbTckZsTrRp7TrjlCiGQ=\");\n_c = UserSignupPage;\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage);\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation, \"/api/1.0/users\");\n_c2 = UserSignupPageWithApiProgress;\nexport default connect()(UserSignupPageWithApiProgress);\nvar _c, _c2;\n$RefreshReg$(_c, \"UserSignupPage\");\n$RefreshReg$(_c2, \"UserSignupPageWithApiProgress\");","map":{"version":3,"names":["React","useState","signup","changeLanguage","login","Input","withTranslation","ButtonWithProgress","LanguageSelector","withApiProgress","connect","loginSuccess","jsxDEV","_jsxDEV","UserSignupPage","props","_s","form","setForm","username","displayName","password","confirmPassword","errors","setErrors","onChange","event","name","value","target","errorsCopy","undefined","t","console","log","setUsername","setDisplayName","setPassword","setConfirmPassword","onClickSignup","preventDefault","body","response","creds","loginResponse","authState","data","image","dispatch","history","push","error","validationErrors","pendingApiCall","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","buttonText","onClickMethod","disabledStatement","_c","UserSignupPageWithTranslation","UserSignupPageWithApiProgress","_c2","$RefreshReg$"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/pages/UserSignupPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {signup, changeLanguage, login} from \"../api/apiCalls\"\r\nimport Input from \"../components/input\"\r\nimport { withTranslation } from \"react-i18next\"\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport LanguageSelector from \"../components/LanguageSelector\";\r\nimport { withApiProgress } from \"../shared/ApiProgress\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginSuccess } from \"../redux/authActions\";\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    //each class component must override render\r\n    \r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        confirmPassword: null\r\n    });\r\n    \r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = (event) =>{\r\n\r\n        const {name, value} = event.target\r\n        //const name = event.target.name;\r\n        //const value = event.target.value;\r\n        const errorsCopy = {...errors}; // copy errors\r\n        errorsCopy[name] = undefined;\r\n\r\n        if(name == \"password\" || name == \"confirmPassword\"){\r\n            if(name == \"password\" && value !== form.confirmPassword){\r\n                errorsCopy.confirmPassword = props.t(\"Passwords do not match\")\r\n                console.log(errorsCopy)\r\n            }\r\n            else if(name == \"confirmPassword\" && value !== form.password){\r\n                errorsCopy.confirmPassword = props.t(\"Passwords do not match\")\r\n                console.log(errorsCopy)\r\n            }else{\r\n                console.log(\"test\")\r\n                errorsCopy.confirmPassword = undefined;\r\n            }\r\n        }\r\n        setErrors(errorsCopy);\r\n        if(name === \"username\"){\r\n            setUsername(value)\r\n        }else if(name === \"displayName\"){\r\n            setDisplayName(value)\r\n        }else if(name === \"password\"){\r\n            setPassword(value)\r\n        }else if(name === \"confirmPassword\"){\r\n            setConfirmPassword(value)\r\n        }\r\n    };\r\n\r\n    console.log(errors)\r\n\r\n    const onClickSignup = async event =>{\r\n        event.preventDefault()\r\n        \r\n        const body = {\r\n            \"username\": form.username,\r\n            \"displayName\": form.displayName,\r\n            \"password\": form.password\r\n        }\r\n\r\n        try {\r\n            const response = await signup(body)\r\n            console.log(\"signed up successfully\");\r\n\r\n            const creds = {\r\n                username: body.username,\r\n                password: body.password\r\n            }\r\n\r\n            const loginResponse = await login(creds);\r\n\r\n            const authState = {\r\n                username: loginResponse.data.username,\r\n                displayName: loginResponse.data.displayName,\r\n                image: loginResponse.data.image,\r\n                password: body.password\r\n            }\r\n\r\n            props.dispatch(loginSuccess(authState))\r\n\r\n            props.history.push(\"/\")\r\n            \r\n        } catch (error) {\r\n            \r\n            if(error.response.data.validationErrors != null){\r\n                setErrors(error.response.data.validationErrors)\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n\r\n    };\r\n\r\n    const {t,pendingApiCall} = props;\r\n    return(\r\n        <div className=\"container\">\r\n            <form> \r\n                <h1 className=\"text-center\">{t(\"Sign up\")}</h1>\r\n                <Input type=\"text\" name=\"username\" label={t(\"Username\")} error ={errors.username} onChange={onChange} />\r\n                <Input type=\"text\" name=\"displayName\" label={t(\"Display Name\")} error ={errors.displayName} onChange={onChange} />\r\n                <Input type=\"password\" name=\"password\" label={t(\"Password\")} error ={errors.password} onChange={onChange} />\r\n                <Input type=\"password\" name=\"confirmPassword\" label={t(\"Confirm Password\")} error ={errors.confirmPassword} onChange={onChange} />\r\n                \r\n                {/*\r\n                <div className=\"form-group\">\r\n                    <label>Username</label>\r\n                    <input type=\"text\" className={errors.username == null ? \"form-control\" : \"form-control is-invalid\"} name=\"username\" onChange={this.onChange}/>\r\n                    <div className=\"invalid-feedback\">\r\n                        {errors.username}\r\n                    </div>\r\n                </div>\r\n                */}\r\n                <ButtonWithProgress buttonText={t(\"Sign up\")} pendingApiCall={pendingApiCall} onClickMethod={onClickSignup} disabledStatement={pendingApiCall || errors.confirmPassword !== undefined}/>\r\n                \r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage)\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation,\"/api/1.0/users\")\r\n\r\nexport default connect()(UserSignupPageWithApiProgress);"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAAQC,MAAM,EAAEC,cAAc,EAAEC,KAAK,QAAO,iBAAiB;AAC7D,OAAOC,KAAK,MAAM,qBAAqB;AACvC,SAASC,eAAe,QAAQ,eAAe;AAC/C,OAAOC,kBAAkB,MAAM,kCAAkC;AACjE,OAAOC,gBAAgB,MAAM,gCAAgC;AAC7D,SAASC,eAAe,QAAQ,uBAAuB;AACvD,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,YAAY,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,cAAc,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAE9B;;EAEA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAAC;IAC7BkB,QAAQ,EAAE,IAAI;IACdC,WAAW,EAAE,IAAI;IACjBC,QAAQ,EAAE,IAAI;IACdC,eAAe,EAAE;EACrB,CAAC,CAAC;EAEF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAGxC,MAAMwB,QAAQ,GAAIC,KAAK,IAAI;IAEvB,MAAM;MAACC,IAAI;MAAEC;IAAK,CAAC,GAAGF,KAAK,CAACG,MAAM;IAClC;IACA;IACA,MAAMC,UAAU,GAAG;MAAC,GAAGP;IAAM,CAAC,CAAC,CAAC;IAChCO,UAAU,CAACH,IAAI,CAAC,GAAGI,SAAS;IAE5B,IAAGJ,IAAI,IAAI,UAAU,IAAIA,IAAI,IAAI,iBAAiB,EAAC;MAC/C,IAAGA,IAAI,IAAI,UAAU,IAAIC,KAAK,KAAKX,IAAI,CAACK,eAAe,EAAC;QACpDQ,UAAU,CAACR,eAAe,GAAGP,KAAK,CAACiB,CAAC,CAAC,wBAAwB,CAAC;QAC9DC,OAAO,CAACC,GAAG,CAACJ,UAAU,CAAC;MAC3B,CAAC,MACI,IAAGH,IAAI,IAAI,iBAAiB,IAAIC,KAAK,KAAKX,IAAI,CAACI,QAAQ,EAAC;QACzDS,UAAU,CAACR,eAAe,GAAGP,KAAK,CAACiB,CAAC,CAAC,wBAAwB,CAAC;QAC9DC,OAAO,CAACC,GAAG,CAACJ,UAAU,CAAC;MAC3B,CAAC,MAAI;QACDG,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;QACnBJ,UAAU,CAACR,eAAe,GAAGS,SAAS;MAC1C;IACJ;IACAP,SAAS,CAACM,UAAU,CAAC;IACrB,IAAGH,IAAI,KAAK,UAAU,EAAC;MACnBQ,WAAW,CAACP,KAAK,CAAC;IACtB,CAAC,MAAK,IAAGD,IAAI,KAAK,aAAa,EAAC;MAC5BS,cAAc,CAACR,KAAK,CAAC;IACzB,CAAC,MAAK,IAAGD,IAAI,KAAK,UAAU,EAAC;MACzBU,WAAW,CAACT,KAAK,CAAC;IACtB,CAAC,MAAK,IAAGD,IAAI,KAAK,iBAAiB,EAAC;MAChCW,kBAAkB,CAACV,KAAK,CAAC;IAC7B;EACJ,CAAC;EAEDK,OAAO,CAACC,GAAG,CAACX,MAAM,CAAC;EAEnB,MAAMgB,aAAa,GAAG,MAAMb,KAAK,IAAG;IAChCA,KAAK,CAACc,cAAc,CAAC,CAAC;IAEtB,MAAMC,IAAI,GAAG;MACT,UAAU,EAAExB,IAAI,CAACE,QAAQ;MACzB,aAAa,EAAEF,IAAI,CAACG,WAAW;MAC/B,UAAU,EAAEH,IAAI,CAACI;IACrB,CAAC;IAED,IAAI;MACA,MAAMqB,QAAQ,GAAG,MAAMxC,MAAM,CAACuC,IAAI,CAAC;MACnCR,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MAErC,MAAMS,KAAK,GAAG;QACVxB,QAAQ,EAAEsB,IAAI,CAACtB,QAAQ;QACvBE,QAAQ,EAAEoB,IAAI,CAACpB;MACnB,CAAC;MAED,MAAMuB,aAAa,GAAG,MAAMxC,KAAK,CAACuC,KAAK,CAAC;MAExC,MAAME,SAAS,GAAG;QACd1B,QAAQ,EAAEyB,aAAa,CAACE,IAAI,CAAC3B,QAAQ;QACrCC,WAAW,EAAEwB,aAAa,CAACE,IAAI,CAAC1B,WAAW;QAC3C2B,KAAK,EAAEH,aAAa,CAACE,IAAI,CAACC,KAAK;QAC/B1B,QAAQ,EAAEoB,IAAI,CAACpB;MACnB,CAAC;MAEDN,KAAK,CAACiC,QAAQ,CAACrC,YAAY,CAACkC,SAAS,CAAC,CAAC;MAEvC9B,KAAK,CAACkC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;IAE3B,CAAC,CAAC,OAAOC,KAAK,EAAE;MAEZ,IAAGA,KAAK,CAACT,QAAQ,CAACI,IAAI,CAACM,gBAAgB,IAAI,IAAI,EAAC;QAC5C5B,SAAS,CAAC2B,KAAK,CAACT,QAAQ,CAACI,IAAI,CAACM,gBAAgB,CAAC;MACnD;IAEJ;EAIJ,CAAC;EAED,MAAM;IAACpB,CAAC;IAACqB;EAAc,CAAC,GAAGtC,KAAK;EAChC,oBACIF,OAAA;IAAKyC,SAAS,EAAC,WAAW;IAAAC,QAAA,eACtB1C,OAAA;MAAA0C,QAAA,gBACI1C,OAAA;QAAIyC,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAEvB,CAAC,CAAC,SAAS;MAAC;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC/C9C,OAAA,CAACR,KAAK;QAACuD,IAAI,EAAC,MAAM;QAACjC,IAAI,EAAC,UAAU;QAACkC,KAAK,EAAE7B,CAAC,CAAC,UAAU,CAAE;QAACmB,KAAK,EAAG5B,MAAM,CAACJ,QAAS;QAACM,QAAQ,EAAEA;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACxG9C,OAAA,CAACR,KAAK;QAACuD,IAAI,EAAC,MAAM;QAACjC,IAAI,EAAC,aAAa;QAACkC,KAAK,EAAE7B,CAAC,CAAC,cAAc,CAAE;QAACmB,KAAK,EAAG5B,MAAM,CAACH,WAAY;QAACK,QAAQ,EAAEA;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAClH9C,OAAA,CAACR,KAAK;QAACuD,IAAI,EAAC,UAAU;QAACjC,IAAI,EAAC,UAAU;QAACkC,KAAK,EAAE7B,CAAC,CAAC,UAAU,CAAE;QAACmB,KAAK,EAAG5B,MAAM,CAACF,QAAS;QAACI,QAAQ,EAAEA;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC5G9C,OAAA,CAACR,KAAK;QAACuD,IAAI,EAAC,UAAU;QAACjC,IAAI,EAAC,iBAAiB;QAACkC,KAAK,EAAE7B,CAAC,CAAC,kBAAkB,CAAE;QAACmB,KAAK,EAAG5B,MAAM,CAACD,eAAgB;QAACG,QAAQ,EAAEA;MAAS;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAWlI9C,OAAA,CAACN,kBAAkB;QAACuD,UAAU,EAAE9B,CAAC,CAAC,SAAS,CAAE;QAACqB,cAAc,EAAEA,cAAe;QAACU,aAAa,EAAExB,aAAc;QAACyB,iBAAiB,EAAEX,cAAc,IAAI9B,MAAM,CAACD,eAAe,KAAKS;MAAU;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEtL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAGd,CAAC;AAAA3C,EAAA,CArHKF,cAAc;AAAAmD,EAAA,GAAdnD,cAAc;AAuHpB,MAAMoD,6BAA6B,GAAG5D,eAAe,CAAC,CAAC,CAACQ,cAAc,CAAC;AACvE,MAAMqD,6BAA6B,GAAG1D,eAAe,CAACyD,6BAA6B,EAAC,gBAAgB,CAAC;AAAAE,GAAA,GAA/FD,6BAA6B;AAEnC,eAAezD,OAAO,CAAC,CAAC,CAACyD,6BAA6B,CAAC;AAAC,IAAAF,EAAA,EAAAG,GAAA;AAAAC,YAAA,CAAAJ,EAAA;AAAAI,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}