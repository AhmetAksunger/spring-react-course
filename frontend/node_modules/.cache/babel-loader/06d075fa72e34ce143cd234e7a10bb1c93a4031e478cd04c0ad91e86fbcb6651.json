{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\90538\\\\Desktop\\\\spring-react-course\\\\frontend\\\\src\\\\pages\\\\UserSignupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { signup, changeLanguage, login } from \"../api/apiCalls\";\nimport Input from \"../components/input\";\nimport { withTranslation } from \"react-i18next\";\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\nimport LanguageSelector from \"../components/LanguageSelector\";\nimport { withApiProgress } from \"../shared/ApiProgress\";\nimport { connect } from \"react-redux\";\nimport { loginSuccess } from \"../redux/authActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserSignupPage = props => {\n  _s();\n  //each class component must override render\n\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    confirmPassword: null\n  });\n  const [errors, setErrors] = useState({});\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    //const name = event.target.name;\n    //const value = event.target.value;\n    const errorsCopy = {\n      ...errors\n    }; // copy errors\n    errorsCopy[name] = undefined;\n    if (name == \"password\" || name == \"confirmPassword\") {\n      if (name == \"password\" && value !== form.confirmPassword) {\n        errorsCopy.confirmPassword = props.t(\"Passwords do not match\");\n        console.log(errorsCopy);\n      } else if (name == \"confirmPassword\" && value !== form.password) {\n        errorsCopy.confirmPassword = props.t(\"Passwords do not match\");\n        console.log(errorsCopy);\n      } else {\n        console.log(\"test\");\n        errorsCopy.confirmPassword = undefined;\n      }\n    }\n    setErrors(errorsCopy);\n  };\n  console.log(errors);\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const body = {\n      \"username\": form.username,\n      \"displayName\": form.displayName,\n      \"password\": form.password\n    };\n    try {\n      const response = await signup(body);\n      console.log(\"signed up successfully\");\n      const creds = {\n        username: body.username,\n        password: body.password\n      };\n      const loginResponse = await login(creds);\n      const authState = {\n        username: loginResponse.data.username,\n        displayName: loginResponse.data.displayName,\n        image: loginResponse.data.image,\n        password: body.password\n      };\n      props.dispatch(loginSuccess(authState));\n      props.history.push(\"/\");\n    } catch (error) {\n      if (error.response.data.validationErrors != null) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n  const {\n    t,\n    pendingApiCall\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: t(\"Sign up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"username\",\n        label: t(\"Username\"),\n        error: errors.username,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        name: \"displayName\",\n        label: t(\"Display Name\"),\n        error: errors.displayName,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"password\",\n        label: t(\"Password\"),\n        error: errors.password,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        name: \"confirmPassword\",\n        label: t(\"Confirm Password\"),\n        error: errors.confirmPassword,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n        buttonText: t(\"Sign up\"),\n        pendingApiCall: pendingApiCall,\n        onClickMethod: onClickSignup,\n        disabledStatement: pendingApiCall || errors.confirmPassword !== undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n};\n_s(UserSignupPage, \"fBt5nl+FbTckZsTrRp7TrjlCiGQ=\");\n_c = UserSignupPage;\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage);\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation, \"/api/1.0/users\");\n_c2 = UserSignupPageWithApiProgress;\nexport default connect()(UserSignupPageWithApiProgress);\nvar _c, _c2;\n$RefreshReg$(_c, \"UserSignupPage\");\n$RefreshReg$(_c2, \"UserSignupPageWithApiProgress\");","map":{"version":3,"names":["React","useState","signup","changeLanguage","login","Input","withTranslation","ButtonWithProgress","LanguageSelector","withApiProgress","connect","loginSuccess","jsxDEV","_jsxDEV","UserSignupPage","props","_s","form","setForm","username","displayName","password","confirmPassword","errors","setErrors","onChange","event","name","value","target","errorsCopy","undefined","t","console","log","onClickSignup","preventDefault","body","response","creds","loginResponse","authState","data","image","dispatch","history","push","error","validationErrors","pendingApiCall","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","buttonText","onClickMethod","disabledStatement","_c","UserSignupPageWithTranslation","UserSignupPageWithApiProgress","_c2","$RefreshReg$"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/pages/UserSignupPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {signup, changeLanguage, login} from \"../api/apiCalls\"\r\nimport Input from \"../components/input\"\r\nimport { withTranslation } from \"react-i18next\"\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport LanguageSelector from \"../components/LanguageSelector\";\r\nimport { withApiProgress } from \"../shared/ApiProgress\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginSuccess } from \"../redux/authActions\";\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    //each class component must override render\r\n    \r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        confirmPassword: null\r\n    });\r\n    \r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = (event) =>{\r\n\r\n        const {name, value} = event.target\r\n        //const name = event.target.name;\r\n        //const value = event.target.value;\r\n        const errorsCopy = {...errors}; // copy errors\r\n        errorsCopy[name] = undefined;\r\n\r\n        if(name == \"password\" || name == \"confirmPassword\"){\r\n            if(name == \"password\" && value !== form.confirmPassword){\r\n                errorsCopy.confirmPassword = props.t(\"Passwords do not match\")\r\n                console.log(errorsCopy)\r\n            }\r\n            else if(name == \"confirmPassword\" && value !== form.password){\r\n                errorsCopy.confirmPassword = props.t(\"Passwords do not match\")\r\n                console.log(errorsCopy)\r\n            }else{\r\n                console.log(\"test\")\r\n                errorsCopy.confirmPassword = undefined;\r\n            }\r\n        }\r\n        setErrors(errorsCopy);\r\n        \r\n    };\r\n\r\n    console.log(errors)\r\n\r\n    const onClickSignup = async event =>{\r\n        event.preventDefault()\r\n        \r\n        const body = {\r\n            \"username\": form.username,\r\n            \"displayName\": form.displayName,\r\n            \"password\": form.password\r\n        }\r\n\r\n        try {\r\n            const response = await signup(body)\r\n            console.log(\"signed up successfully\");\r\n\r\n            const creds = {\r\n                username: body.username,\r\n                password: body.password\r\n            }\r\n\r\n            const loginResponse = await login(creds);\r\n\r\n            const authState = {\r\n                username: loginResponse.data.username,\r\n                displayName: loginResponse.data.displayName,\r\n                image: loginResponse.data.image,\r\n                password: body.password\r\n            }\r\n\r\n            props.dispatch(loginSuccess(authState))\r\n\r\n            props.history.push(\"/\")\r\n            \r\n        } catch (error) {\r\n            \r\n            if(error.response.data.validationErrors != null){\r\n                setErrors(error.response.data.validationErrors)\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n\r\n    };\r\n\r\n    const {t,pendingApiCall} = props;\r\n    return(\r\n        <div className=\"container\">\r\n            <form> \r\n                <h1 className=\"text-center\">{t(\"Sign up\")}</h1>\r\n                <Input type=\"text\" name=\"username\" label={t(\"Username\")} error ={errors.username} onChange={onChange} />\r\n                <Input type=\"text\" name=\"displayName\" label={t(\"Display Name\")} error ={errors.displayName} onChange={onChange} />\r\n                <Input type=\"password\" name=\"password\" label={t(\"Password\")} error ={errors.password} onChange={onChange} />\r\n                <Input type=\"password\" name=\"confirmPassword\" label={t(\"Confirm Password\")} error ={errors.confirmPassword} onChange={onChange} />\r\n                \r\n                {/*\r\n                <div className=\"form-group\">\r\n                    <label>Username</label>\r\n                    <input type=\"text\" className={errors.username == null ? \"form-control\" : \"form-control is-invalid\"} name=\"username\" onChange={this.onChange}/>\r\n                    <div className=\"invalid-feedback\">\r\n                        {errors.username}\r\n                    </div>\r\n                </div>\r\n                */}\r\n                <ButtonWithProgress buttonText={t(\"Sign up\")} pendingApiCall={pendingApiCall} onClickMethod={onClickSignup} disabledStatement={pendingApiCall || errors.confirmPassword !== undefined}/>\r\n                \r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPage)\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPageWithTranslation,\"/api/1.0/users\")\r\n\r\nexport default connect()(UserSignupPageWithApiProgress);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}