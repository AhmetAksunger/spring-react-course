{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{getHoaxes,getOldHoaxes}from'../api/apiCalls';import HoaxListItem from'./HoaxListItem';import{useTranslation}from'react-i18next';import{useApiProgress}from'../shared/ApiProgress';import{useParams}from'react-router-dom/cjs/react-router-dom.min';import ButtonWithProgress from'./ButtonWithProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HoaxFeedForProfile=function HoaxFeedForProfile(){var _useState=useState({content:[],size:5,number:0,totalPages:0,last:false}),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),username=_useParams.username;var pendingApiCall=useApiProgress(\"get\",\"/api/1.0/users/\".concat(username,\"/hoaxes\"));useEffect(function(){loadHoaxes();},[]);var loadHoaxes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(sizeNumber){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getHoaxes(username,0,sizeNumber);case 3:response=_context.sent;setPage(response.data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function loadHoaxes(_x){return _ref.apply(this,arguments);};}();var onClickLoadOldHoaxes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var contentFirstElementId,size,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:contentFirstElementId=page.content[0].id;size=page.size+5;_context2.prev=2;_context2.next=5;return getOldHoaxes(contentFirstElementId,0,size,username);case 5:response=_context2.sent;setPage(response.data);_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}));return function onClickLoadOldHoaxes(){return _ref2.apply(this,arguments);};}();var hoaxes=page.content,last=page.last;if(hoaxes.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"alert alert-secondary\",children:t(\"There are no hoaxes\")})});}var onDeleteSuccess=function onDeleteSuccess(){loadHoaxes(page.size-1);};return/*#__PURE__*/_jsxs(\"div\",{children:[hoaxes.map(function(value,index){var hoaxContent=value.content,timeStamp=value.timeStamp,user=value.user,id=value.id,fileAttachment=value.fileAttachment;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(HoaxListItem,{content:hoaxContent,fileAttachment:fileAttachment,timeStamp:timeStamp,user:user,hoaxId:id,onDeleteSuccess:onDeleteSuccess},index)});}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-2\",children:/*#__PURE__*/_jsx(ButtonWithProgress,{buttonText:t(\"Load Old Hoaxes\"),className:\"btn btn-primary\",onClickMethod:onClickLoadOldHoaxes,pendingApiCall:pendingApiCall,disabledStatement:pendingApiCall||last})})]});};export default HoaxFeedForProfile;","map":{"version":3,"names":["React","useEffect","useState","getHoaxes","getOldHoaxes","HoaxListItem","useTranslation","useApiProgress","useParams","ButtonWithProgress","jsx","_jsx","jsxs","_jsxs","HoaxFeedForProfile","_useState","content","size","number","totalPages","last","_useState2","_slicedToArray","page","setPage","_useTranslation","t","_useParams","username","pendingApiCall","concat","loadHoaxes","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","sizeNumber","response","wrap","_callee$","_context","prev","next","sent","data","t0","stop","_x","apply","arguments","onClickLoadOldHoaxes","_ref2","_callee2","contentFirstElementId","_callee2$","_context2","id","hoaxes","length","className","children","onDeleteSuccess","map","value","index","hoaxContent","timeStamp","user","fileAttachment","hoaxId","buttonText","onClickMethod","disabledStatement"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/components/HoaxFeedForProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getHoaxes, getOldHoaxes } from '../api/apiCalls';\r\nimport HoaxListItem from './HoaxListItem';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\nimport { useParams } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport ButtonWithProgress from './ButtonWithProgress';\r\n\r\nconst HoaxFeedForProfile = () => {\r\n    const [page,setPage] = useState({\r\n        content: [],\r\n        size: 5,\r\n        number: 0,\r\n        totalPages: 0,\r\n        last: false\r\n    });\r\n\r\n    const {t} = useTranslation();\r\n    const {username} = useParams();\r\n    const pendingApiCall = useApiProgress(\"get\",`/api/1.0/users/${username}/hoaxes`)\r\n\r\n    useEffect(() => {\r\n        loadHoaxes();\r\n    },[]);\r\n\r\n    const loadHoaxes = async (sizeNumber) => {\r\n        \r\n        try {\r\n            const response = await getHoaxes(username,0,sizeNumber);\r\n            setPage(response.data);    \r\n        } catch (error) {\r\n            \r\n        }    \r\n    }\r\n\r\n    const onClickLoadOldHoaxes = async () => {\r\n        const contentFirstElementId = page.content[0].id;\r\n        const size = page.size + 5;\r\n         try {\r\n            const response = await getOldHoaxes(contentFirstElementId,0,size,username);\r\n            setPage(response.data);    \r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n    const {content: hoaxes, last} = page;\r\n\r\n    if(hoaxes.length === 0){\r\n        return(\r\n            <div className='text-center mt-4'>\r\n                <span className='alert alert-secondary'>{t(\"There are no hoaxes\")}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const onDeleteSuccess = () => {\r\n        loadHoaxes(page.size - 1);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {hoaxes.map((value,index) => {\r\n                const {content: hoaxContent, timeStamp, user, id, fileAttachment} = value;\r\n                return (\r\n                    <div>\r\n                        <HoaxListItem key={index} content={hoaxContent} fileAttachment={fileAttachment} timeStamp={timeStamp} user={user} hoaxId={id} onDeleteSuccess={onDeleteSuccess}/>\r\n                    </div>\r\n                )\r\n            })}\r\n            <div className='text-center mt-2'>\r\n                <ButtonWithProgress buttonText={t(\"Load Old Hoaxes\")} className='btn btn-primary' onClickMethod={onClickLoadOldHoaxes} pendingApiCall={pendingApiCall} disabledStatement={pendingApiCall || last} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HoaxFeedForProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}