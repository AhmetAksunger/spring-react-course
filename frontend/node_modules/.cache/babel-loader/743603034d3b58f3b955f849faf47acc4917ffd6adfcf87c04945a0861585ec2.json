{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{getUsers}from'../api/apiCalls';import{useTranslation}from'react-i18next';import UserListItem from'./UserListItem';import{withApiProgress}from'../shared/ApiProgress';import Spinner from'./Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserList=function UserList(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState({content:[],size:3,number:0,totalPages:0}),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadFailure=_useState4[0],setLoadFailure=_useState4[1];var loadUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageNumber){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoadFailure(false);_context.prev=1;_context.next=4;return getUsers(pageNumber);case 4:response=_context.sent;setPage(response.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setLoadFailure(true);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function loadUsers(_x){return _ref.apply(this,arguments);};}();// if you give an empty error, it will act like componentdidmount\nuseEffect(function(){loadUsers();},[]);var onClickNext=function onClickNext(){var nextPage=page.number+1;loadUsers(nextPage);};var onClickPrevious=function onClickPrevious(){var previousPage=page.number-1;loadUsers(previousPage);};var onClickRaquo=function onClickRaquo(){var lastPage=page.totalPages-1;loadUsers(lastPage);};var onClickLaquo=function onClickLaquo(){var firstPage=0;loadUsers(0);};var users=page.content,last=page.last,first=page.first;var pendingApiCall=props.pendingApiCall;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-header text-center\",children:t(\"Users\")}),!pendingApiCall?/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:users.map(function(user,index){return/*#__PURE__*/_jsx(UserListItem,{user:user},user.username);})}):/*#__PURE__*/_jsx(Spinner,{}),loadFailure&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-danger\",children:[\" \",t(\"Failure\"),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light float-end\",onClick:onClickRaquo,disabled:last||pendingApiCall,children:\"\\xBB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light float-end\",onClick:onClickNext,disabled:last||pendingApiCall,children:t(\"Next\")}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:onClickLaquo,disabled:first||pendingApiCall,children:\"\\xAB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light\",onClick:onClickPrevious,disabled:first||pendingApiCall,children:t(\"Previous\")})]})]})});};export default withApiProgress(UserList,\"get\",\"/api/1.0/users\");","map":{"version":3,"names":["React","useEffect","useState","getUsers","useTranslation","UserListItem","withApiProgress","Spinner","jsx","_jsx","jsxs","_jsxs","UserList","props","_useTranslation","t","_useState","content","size","number","totalPages","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","loadFailure","setLoadFailure","loadUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","pageNumber","response","wrap","_callee$","_context","prev","next","sent","data","t0","stop","_x","apply","arguments","onClickNext","nextPage","onClickPrevious","previousPage","onClickRaquo","lastPage","onClickLaquo","firstPage","users","last","first","pendingApiCall","children","className","map","user","index","username","type","onClick","disabled"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/components/UserList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { getUsers } from '../api/apiCalls'\r\nimport { useTranslation } from 'react-i18next'\r\nimport UserListItem from './UserListItem'\r\nimport { withApiProgress } from '../shared/ApiProgress'\r\nimport Spinner from './Spinner'\r\n\r\nconst UserList=(props) => {\r\n\r\n    const {t} = useTranslation();\r\n    const [page, setPage] = useState({\r\n        content: [],\r\n        size: 3,\r\n        number: 0,\r\n        totalPages: 0\r\n    });\r\n\r\n    const [loadFailure,setLoadFailure] = useState(false);\r\n\r\n    const loadUsers = async (pageNumber) => {\r\n        setLoadFailure(false);\r\n        try {\r\n            const response = await getUsers(pageNumber);\r\n            setPage(response.data)\r\n        } catch (error) {\r\n            setLoadFailure(true);\r\n        }\r\n    }\r\n\r\n    // if you give an empty error, it will act like componentdidmount\r\n    useEffect(() => {\r\n        loadUsers();\r\n    }, [])\r\n\r\n    const onClickNext = () => {\r\n        const nextPage = page.number + 1;\r\n        loadUsers(nextPage);\r\n    }\r\n\r\n    const onClickPrevious = () => {\r\n        const previousPage = page.number - 1;\r\n        loadUsers(previousPage);\r\n    }\r\n    \r\n    const onClickRaquo = () => {\r\n        const lastPage = page.totalPages - 1;\r\n        loadUsers(lastPage)\r\n    }\r\n\r\n    const onClickLaquo = () => {\r\n        const firstPage = 0;\r\n        loadUsers(0);\r\n    }\r\n\r\n    const {content: users, last, first} = page;\r\n    const {pendingApiCall} = props\r\n    return (\r\n    <div>\r\n        <div className='card'>\r\n            <h3 className='card-header text-center'>{t(\"Users\")}</h3>\r\n            {!pendingApiCall ?\r\n            <ul className=\"list-group\">\r\n            {users.map((user,index) => {\r\n                return (\r\n                    <UserListItem key={user.username} user={user} />\r\n                )\r\n            })}\r\n            </ul> \r\n            :\r\n            <Spinner />\r\n            }\r\n\r\n            {loadFailure && <div className='text-center text-danger'> {t(\"Failure\")} </div>}\r\n\r\n            <div>\r\n                <button type='button' className='btn btn-light float-end' onClick={onClickRaquo} disabled={last || pendingApiCall}>&raquo;</button>\r\n                <button type='button' className='btn btn-light float-end' onClick={onClickNext} disabled={last || pendingApiCall}>{t(\"Next\")}</button>\r\n                <button type='button' className='btn btn-light' onClick={onClickLaquo} disabled={first || pendingApiCall} >&laquo;</button>\r\n                <button type='button' className='btn btn-light' onClick={onClickPrevious} disabled={first || pendingApiCall}>{t(\"Previous\")}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default withApiProgress(UserList, \"get\",\"/api/1.0/users\");"],"mappings":"2aAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,eAAe,KAAQ,uBAAuB,CACvD,MAAO,CAAAC,OAAO,KAAM,WAAW,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/B,GAAM,CAAAC,QAAQ,CAAC,QAAT,CAAAA,QAAQA,CAAEC,KAAK,CAAK,CAEtB,IAAAC,eAAA,CAAYV,cAAc,CAAC,CAAC,CAArBW,CAAC,CAAAD,eAAA,CAADC,CAAC,CACR,IAAAC,SAAA,CAAwBd,QAAQ,CAAC,CAC7Be,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,CAAC,CACPC,MAAM,CAAE,CAAC,CACTC,UAAU,CAAE,CAChB,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAN,SAAA,IALKO,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAOpB,IAAAI,UAAA,CAAqCvB,QAAQ,CAAC,KAAK,CAAC,CAAAwB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7CE,WAAW,CAAAD,UAAA,IAACE,cAAc,CAAAF,UAAA,IAEjC,GAAM,CAAAG,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,UAAU,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC/Bb,cAAc,CAAC,KAAK,CAAC,CAACW,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEK,CAAAtC,QAAQ,CAACgC,UAAU,CAAC,QAArCC,QAAQ,CAAAG,QAAA,CAAAG,IAAA,CACdlB,OAAO,CAACY,QAAQ,CAACO,IAAI,CAAC,CAAAJ,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAK,EAAA,CAAAL,QAAA,aAEtBX,cAAc,CAAC,IAAI,CAAC,CAAC,yBAAAW,QAAA,CAAAM,IAAA,MAAAX,OAAA,gBAE5B,kBARK,CAAAL,SAASA,CAAAiB,EAAA,SAAAhB,IAAA,CAAAiB,KAAA,MAAAC,SAAA,OAQd,CAED;AACA/C,SAAS,CAAC,UAAM,CACZ4B,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAoB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACtB,GAAM,CAAAC,QAAQ,CAAG3B,IAAI,CAACJ,MAAM,CAAG,CAAC,CAChCU,SAAS,CAACqB,QAAQ,CAAC,CACvB,CAAC,CAED,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC1B,GAAM,CAAAC,YAAY,CAAG7B,IAAI,CAACJ,MAAM,CAAG,CAAC,CACpCU,SAAS,CAACuB,YAAY,CAAC,CAC3B,CAAC,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACvB,GAAM,CAAAC,QAAQ,CAAG/B,IAAI,CAACH,UAAU,CAAG,CAAC,CACpCS,SAAS,CAACyB,QAAQ,CAAC,CACvB,CAAC,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACvB,GAAM,CAAAC,SAAS,CAAG,CAAC,CACnB3B,SAAS,CAAC,CAAC,CAAC,CAChB,CAAC,CAED,GAAgB,CAAA4B,KAAK,CAAiBlC,IAAI,CAAnCN,OAAO,CAASyC,IAAI,CAAWnC,IAAI,CAAnBmC,IAAI,CAAEC,KAAK,CAAIpC,IAAI,CAAboC,KAAK,CAClC,GAAO,CAAAC,cAAc,CAAI/C,KAAK,CAAvB+C,cAAc,CACrB,mBACAnD,IAAA,QAAAoD,QAAA,cACIlD,KAAA,QAAKmD,SAAS,CAAC,MAAM,CAAAD,QAAA,eACjBpD,IAAA,OAAIqD,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAE9C,CAAC,CAAC,OAAO,CAAC,CAAK,CAAC,CACxD,CAAC6C,cAAc,cAChBnD,IAAA,OAAIqD,SAAS,CAAC,YAAY,CAAAD,QAAA,CACzBJ,KAAK,CAACM,GAAG,CAAC,SAACC,IAAI,CAACC,KAAK,CAAK,CACvB,mBACIxD,IAAA,CAACJ,YAAY,EAAqB2D,IAAI,CAAEA,IAAK,EAA1BA,IAAI,CAACE,QAAuB,CAAC,CAExD,CAAC,CAAC,CACE,CAAC,cAELzD,IAAA,CAACF,OAAO,GAAE,CAAC,CAGVoB,WAAW,eAAIhB,KAAA,QAAKmD,SAAS,CAAC,yBAAyB,CAAAD,QAAA,EAAC,GAAC,CAAC9C,CAAC,CAAC,SAAS,CAAC,CAAC,GAAC,EAAK,CAAC,cAE/EJ,KAAA,QAAAkD,QAAA,eACIpD,IAAA,WAAQ0D,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,yBAAyB,CAACM,OAAO,CAAEf,YAAa,CAACgB,QAAQ,CAAEX,IAAI,EAAIE,cAAe,CAAAC,QAAA,CAAC,MAAO,CAAQ,CAAC,cACnIpD,IAAA,WAAQ0D,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,yBAAyB,CAACM,OAAO,CAAEnB,WAAY,CAACoB,QAAQ,CAAEX,IAAI,EAAIE,cAAe,CAAAC,QAAA,CAAE9C,CAAC,CAAC,MAAM,CAAC,CAAS,CAAC,cACtIN,IAAA,WAAQ0D,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,eAAe,CAACM,OAAO,CAAEb,YAAa,CAACc,QAAQ,CAAEV,KAAK,EAAIC,cAAe,CAAAC,QAAA,CAAE,MAAO,CAAQ,CAAC,cAC3HpD,IAAA,WAAQ0D,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,eAAe,CAACM,OAAO,CAAEjB,eAAgB,CAACkB,QAAQ,CAAEV,KAAK,EAAIC,cAAe,CAAAC,QAAA,CAAE9C,CAAC,CAAC,UAAU,CAAC,CAAS,CAAC,EACpI,CAAC,EACL,CAAC,CACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,eAAe,CAACM,QAAQ,CAAE,KAAK,CAAC,gBAAgB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}