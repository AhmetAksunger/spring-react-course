{"ast":null,"code":"import _objectSpread from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"C:/Users/90538/Desktop/spring-react-course/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export var useApiProgress=function useApiProgress(apiMethod,apiPath){var strictPath=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pendingApiCall=_useState2[0],setPendingAPiCall=_useState2[1];useEffect(function(){var requestInterceptor,responseInterceptor=undefined;var registerInterceptors=function registerInterceptors(){requestInterceptor=axios.interceptors.request.use(function(request){if(strictPath&&apiPath===request.url&&request.method===apiMethod){setPendingAPiCall(true);}else if(!strictPath&&request.url.startsWith(apiPath)&&request.method===apiMethod){setPendingAPiCall(true);}return request;});responseInterceptor=axios.interceptors.response.use(function(response){if(response.config.url.startsWith(apiPath)&&response.config.method===apiMethod){setPendingAPiCall(false);}return response;},function(error){if(error.config.url.startsWith(apiPath)){setPendingAPiCall(false);}throw error;});};registerInterceptors();var unregisterInterceptors=function unregisterInterceptors(){axios.interceptors.request.eject(requestInterceptor);axios.interceptors.response.eject(responseInterceptor);};return function unmount(){unregisterInterceptors();};},[apiPath,apiMethod]);return pendingApiCall;};export function withApiProgress(WrappedComponent,apiMethod,apiPath){return/*#__PURE__*/function(_Component){_inherits(_class2,_Component);var _super=_createSuper(_class2);function _class2(){var _this;_classCallCheck(this,_class2);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pendingApiCall:false};_this.registerInterceptors=function(){_this.requestInterceptor=axios.interceptors.request.use(function(request){if(request.url.startsWith(apiPath)&&request.method===apiMethod){_this.setState({pendingApiCall:true});}return request;});_this.responseInterceptor=axios.interceptors.response.use(function(response){if(response.config.url.startsWith(apiPath)&&response.config.method===apiMethod){_this.setState({pendingApiCall:false});}return response;},function(error){if(error.config.url.startsWith(apiPath)){_this.setState({pendingApiCall:false});}throw error;});};_this.unregisterInterceptors=function(){axios.interceptors.request.eject(_this.requestInterceptor);axios.interceptors.response.eject(_this.responseInterceptor);};return _this;}_createClass(_class2,[{key:\"componentDidMount\",value:function componentDidMount(){this.registerInterceptors();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unregisterInterceptors();}},{key:\"render\",value:function render(){//return <div>{React.cloneElement(this.props.children, {pendingApiCall: this.state.pendingApiCall})}</div>\nreturn/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({pendingApiCall:this.state.pendingApiCall},this.props));}}]);return _class2;}(Component);}","map":{"version":3,"names":["React","Component","useEffect","useState","axios","jsx","_jsx","useApiProgress","apiMethod","apiPath","strictPath","arguments","length","undefined","_useState","_useState2","_slicedToArray","pendingApiCall","setPendingAPiCall","requestInterceptor","responseInterceptor","registerInterceptors","interceptors","request","use","url","method","startsWith","response","config","error","unregisterInterceptors","eject","unmount","withApiProgress","WrappedComponent","_Component","_inherits","_class2","_super","_createSuper","_this","_classCallCheck","_len","args","Array","_key","call","apply","concat","state","setState","_createClass","key","value","componentDidMount","componentWillUnmount","render","_objectSpread","props"],"sources":["C:/Users/90538/Desktop/spring-react-course/frontend/src/shared/ApiProgress.js"],"sourcesContent":["import React, { Component, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\n\r\nexport const useApiProgress = (apiMethod, apiPath, strictPath = false) => {\r\n    const [pendingApiCall, setPendingAPiCall] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let requestInterceptor,responseInterceptor = undefined;\r\n        const registerInterceptors = () => {\r\n            requestInterceptor = axios.interceptors.request.use((request) => {\r\n\r\n                if(strictPath && apiPath === request.url && request.method === apiMethod){\r\n                    setPendingAPiCall(true);\r\n                }\r\n                else if(!strictPath && request.url.startsWith(apiPath) && request.method === apiMethod){\r\n                    setPendingAPiCall(true);\r\n                }\r\n                return request;\r\n            })\r\n    \r\n            responseInterceptor = axios.interceptors.response.use((response) => {\r\n                if(response.config.url.startsWith(apiPath) && response.config.method === apiMethod){\r\n                    setPendingAPiCall(false);\r\n\r\n                }\r\n                return response;\r\n            }, (error) => {\r\n    \r\n                if(error.config.url.startsWith(apiPath)){\r\n                    setPendingAPiCall(false);\r\n\r\n                }\r\n                throw error;\r\n            })\r\n        }\r\n\r\n        registerInterceptors();\r\n\r\n        \r\n        const unregisterInterceptors = () => {\r\n            axios.interceptors.request.eject(requestInterceptor);\r\n            axios.interceptors.response.eject(responseInterceptor);\r\n            \r\n        }\r\n\r\n        return function unmount() {\r\n            unregisterInterceptors();\r\n        }\r\n    },[apiPath, apiMethod])\r\n\r\n    return pendingApiCall;\r\n}\r\n\r\nexport function withApiProgress(WrappedComponent,apiMethod,apiPath){\r\n    return class extends Component {\r\n  \r\n        state = {\r\n            pendingApiCall: false\r\n        }\r\n      \r\n        registerInterceptors = () => {\r\n            this.requestInterceptor = axios.interceptors.request.use((request) => {\r\n                if(request.url.startsWith(apiPath) && request.method === apiMethod){\r\n                    this.setState({\r\n                        pendingApiCall: true\r\n                    })\r\n                }\r\n                return request;\r\n            })\r\n    \r\n            this.responseInterceptor = axios.interceptors.response.use((response) => {\r\n                if(response.config.url.startsWith(apiPath) && response.config.method === apiMethod){\r\n                    this.setState({\r\n                        pendingApiCall: false\r\n                    })\r\n                }\r\n                return response;\r\n            }, (error) => {\r\n    \r\n                if(error.config.url.startsWith(apiPath)){\r\n                    this.setState({\r\n                        pendingApiCall: false\r\n                    })\r\n                }\r\n                throw error;\r\n            })\r\n        }\r\n\r\n        unregisterInterceptors = () => {\r\n            axios.interceptors.request.eject(this.requestInterceptor);\r\n            axios.interceptors.response.eject(this.responseInterceptor);\r\n            \r\n        }\r\n\r\n        componentDidMount(){\r\n            this.registerInterceptors();\r\n        }\r\n    \r\n        componentWillUnmount(){\r\n            this.unregisterInterceptors();\r\n        }\r\n\r\n        render() {\r\n        //return <div>{React.cloneElement(this.props.children, {pendingApiCall: this.state.pendingApiCall})}</div>\r\n        return <WrappedComponent pendingApiCall={this.state.pendingApiCall} {...this.props} />\r\n    }\r\n    } \r\n}\r\n\r\n"],"mappings":"qyBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7D,MAAO,CAAAC,KAAK,KAAM,OAAO,QAAAC,GAAA,IAAAC,IAAA,yBAEzB,MAAO,IAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,SAAS,CAAEC,OAAO,CAAyB,IAAvB,CAAAC,UAAU,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CACjE,IAAAG,SAAA,CAA4CX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApDG,cAAc,CAAAF,UAAA,IAAEG,iBAAiB,CAAAH,UAAA,IAExCb,SAAS,CAAC,UAAM,CACZ,GAAI,CAAAiB,kBAAkB,CAACC,mBAAmB,CAAGP,SAAS,CACtD,GAAM,CAAAQ,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CAC/BF,kBAAkB,CAAGf,KAAK,CAACkB,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,SAACD,OAAO,CAAK,CAE7D,GAAGb,UAAU,EAAID,OAAO,GAAKc,OAAO,CAACE,GAAG,EAAIF,OAAO,CAACG,MAAM,GAAKlB,SAAS,CAAC,CACrEU,iBAAiB,CAAC,IAAI,CAAC,CAC3B,CAAC,IACI,IAAG,CAACR,UAAU,EAAIa,OAAO,CAACE,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,EAAIc,OAAO,CAACG,MAAM,GAAKlB,SAAS,CAAC,CACnFU,iBAAiB,CAAC,IAAI,CAAC,CAC3B,CACA,MAAO,CAAAK,OAAO,CAClB,CAAC,CAAC,CAEFH,mBAAmB,CAAGhB,KAAK,CAACkB,YAAY,CAACM,QAAQ,CAACJ,GAAG,CAAC,SAACI,QAAQ,CAAK,CAChE,GAAGA,QAAQ,CAACC,MAAM,CAACJ,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,EAAImB,QAAQ,CAACC,MAAM,CAACH,MAAM,GAAKlB,SAAS,CAAC,CAC/EU,iBAAiB,CAAC,KAAK,CAAC,CAE5B,CACA,MAAO,CAAAU,QAAQ,CACnB,CAAC,CAAE,SAACE,KAAK,CAAK,CAEV,GAAGA,KAAK,CAACD,MAAM,CAACJ,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,CAAC,CACpCS,iBAAiB,CAAC,KAAK,CAAC,CAE5B,CACA,KAAM,CAAAY,KAAK,CACf,CAAC,CAAC,CACN,CAAC,CAEDT,oBAAoB,CAAC,CAAC,CAGtB,GAAM,CAAAU,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,CAAS,CACjC3B,KAAK,CAACkB,YAAY,CAACC,OAAO,CAACS,KAAK,CAACb,kBAAkB,CAAC,CACpDf,KAAK,CAACkB,YAAY,CAACM,QAAQ,CAACI,KAAK,CAACZ,mBAAmB,CAAC,CAE1D,CAAC,CAED,MAAO,SAAS,CAAAa,OAAOA,CAAA,CAAG,CACtBF,sBAAsB,CAAC,CAAC,CAC5B,CAAC,CACL,CAAC,CAAC,CAACtB,OAAO,CAAED,SAAS,CAAC,CAAC,CAEvB,MAAO,CAAAS,cAAc,CACzB,CAAC,CAED,MAAO,SAAS,CAAAiB,eAAeA,CAACC,gBAAgB,CAAC3B,SAAS,CAACC,OAAO,CAAC,CAC/D,4BAAA2B,UAAA,EAAAC,SAAA,CAAAC,OAAA,CAAAF,UAAA,MAAAG,MAAA,CAAAC,YAAA,CAAAF,OAAA,WAAAA,QAAA,MAAAG,KAAA,CAAAC,eAAA,MAAAJ,OAAA,UAAAK,IAAA,CAAAhC,SAAA,CAAAC,MAAA,CAAAgC,IAAA,KAAAC,KAAA,CAAAF,IAAA,EAAAG,IAAA,GAAAA,IAAA,CAAAH,IAAA,CAAAG,IAAA,IAAAF,IAAA,CAAAE,IAAA,EAAAnC,SAAA,CAAAmC,IAAA,GAAAL,KAAA,CAAAF,MAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,MAAA,QAAAU,MAAA,CAAAL,IAAA,GAAAH,KAAA,CAEIS,KAAK,CAAG,CACJjC,cAAc,CAAE,KACpB,CAAC,CAAAwB,KAAA,CAEDpB,oBAAoB,CAAG,UAAM,CACzBoB,KAAA,CAAKtB,kBAAkB,CAAGf,KAAK,CAACkB,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,SAACD,OAAO,CAAK,CAClE,GAAGA,OAAO,CAACE,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,EAAIc,OAAO,CAACG,MAAM,GAAKlB,SAAS,CAAC,CAC/DiC,KAAA,CAAKU,QAAQ,CAAC,CACVlC,cAAc,CAAE,IACpB,CAAC,CAAC,CACN,CACA,MAAO,CAAAM,OAAO,CAClB,CAAC,CAAC,CAEFkB,KAAA,CAAKrB,mBAAmB,CAAGhB,KAAK,CAACkB,YAAY,CAACM,QAAQ,CAACJ,GAAG,CAAC,SAACI,QAAQ,CAAK,CACrE,GAAGA,QAAQ,CAACC,MAAM,CAACJ,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,EAAImB,QAAQ,CAACC,MAAM,CAACH,MAAM,GAAKlB,SAAS,CAAC,CAC/EiC,KAAA,CAAKU,QAAQ,CAAC,CACVlC,cAAc,CAAE,KACpB,CAAC,CAAC,CACN,CACA,MAAO,CAAAW,QAAQ,CACnB,CAAC,CAAE,SAACE,KAAK,CAAK,CAEV,GAAGA,KAAK,CAACD,MAAM,CAACJ,GAAG,CAACE,UAAU,CAAClB,OAAO,CAAC,CAAC,CACpCgC,KAAA,CAAKU,QAAQ,CAAC,CACVlC,cAAc,CAAE,KACpB,CAAC,CAAC,CACN,CACA,KAAM,CAAAa,KAAK,CACf,CAAC,CAAC,CACN,CAAC,CAAAW,KAAA,CAEDV,sBAAsB,CAAG,UAAM,CAC3B3B,KAAK,CAACkB,YAAY,CAACC,OAAO,CAACS,KAAK,CAACS,KAAA,CAAKtB,kBAAkB,CAAC,CACzDf,KAAK,CAACkB,YAAY,CAACM,QAAQ,CAACI,KAAK,CAACS,KAAA,CAAKrB,mBAAmB,CAAC,CAE/D,CAAC,QAAAqB,KAAA,EAAAW,YAAA,CAAAd,OAAA,GAAAe,GAAA,qBAAAC,KAAA,CAED,SAAAC,kBAAA,CAAmB,CACf,IAAI,CAAClC,oBAAoB,CAAC,CAAC,CAC/B,CAAC,GAAAgC,GAAA,wBAAAC,KAAA,CAED,SAAAE,qBAAA,CAAsB,CAClB,IAAI,CAACzB,sBAAsB,CAAC,CAAC,CACjC,CAAC,GAAAsB,GAAA,UAAAC,KAAA,CAED,SAAAG,OAAA,CAAS,CACT;AACA,mBAAOnD,IAAA,CAAC6B,gBAAgB,CAAAuB,aAAA,EAACzC,cAAc,CAAE,IAAI,CAACiC,KAAK,CAACjC,cAAe,EAAK,IAAI,CAAC0C,KAAK,CAAG,CAAC,CAC1F,CAAC,WAAArB,OAAA,GAnDoBrC,SAAS,EAqDlC"},"metadata":{},"sourceType":"module","externalDependencies":[]}